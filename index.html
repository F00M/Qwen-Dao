<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qwen DAO - Swap</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Ethers.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.umd.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: {
                            primary: '#6366f1',
                            primaryHover: '#4f46e5',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="text-white antialiased selection:bg-brand-primary selection:text-white">

    <!-- NAVBAR -->
    <nav class="flex justify-between items-center p-6 max-w-7xl mx-auto">
        <div class="flex items-center gap-3">
            <img src="https://cdn-icons-png.flaticon.com/512/6132/6132976.png" alt="Qwen Logo" class="w-10 h-10 drop-shadow-lg">
            <span class="text-xl font-bold tracking-wide text-white">Qwen DAO</span>
        </div>

        <div class="hidden md:flex bg-slate-800/60 rounded-full p-1.5 backdrop-blur-md border border-slate-700/50">
            <button onclick="switchTab('swap')" id="btn-swap" class="px-6 py-2 rounded-full text-sm font-medium bg-slate-700 text-white shadow-sm transition">Swap</button>
            <button onclick="switchTab('pool')" id="btn-pool" class="px-6 py-2 rounded-full text-sm font-medium text-slate-400 hover:text-white transition">Pool</button>
            <button class="px-6 py-2 rounded-full text-sm font-medium text-slate-400 hover:text-white transition">Bridge</button>
            <button class="px-6 py-2 rounded-full text-sm font-medium text-slate-400 hover:text-white transition">About ↗</button>
        </div>

        <div class="flex items-center gap-4">
            <div class="hidden md:flex items-center gap-2 bg-slate-800/60 px-4 py-2 rounded-full border border-slate-700 hover:border-slate-600 cursor-pointer transition">
                <div class="w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"></div>
                <span class="text-sm font-medium text-slate-200">Sepolia</span>
                <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
            <button onclick="connectWallet()" id="connectBtn" class="bg-slate-200 hover:bg-white text-slate-900 font-bold py-2.5 px-6 rounded-full transition shadow-lg">
                Connect Wallet
            </button>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="flex flex-col items-center justify-center mt-8 px-4 relative">
        
        <!-- SWAP VIEW -->
        <div id="view-swap" class="w-full max-w-[480px] glass-panel rounded-3xl p-2 shadow-2xl transition-all duration-300 relative z-10">
            <div class="bg-slate-900 rounded-[20px] p-6 relative overflow-hidden">
                
                <!-- Header Swap + Settings Icon -->
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-semibold text-slate-200">Swap</h2>
                    <div class="relative">
                        <button onclick="toggleSettings()" class="text-slate-400 hover:text-white transition p-2 hover:bg-slate-800 rounded-full">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        </button>

                        <!-- SETTINGS MODAL -->
                        <div id="settings-modal" class="hidden absolute right-0 top-12 w-[320px] bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl p-4 z-50">
                            <div class="flex justify-between items-center mb-4 border-b border-slate-700 pb-2">
                                <h3 class="font-semibold text-slate-200">Transaction Settings</h3>
                                <button onclick="toggleSettings()" class="text-slate-400 hover:text-white"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-sm text-slate-400">Slippage tolerance</span>
                                </div>
                                <div class="flex gap-2">
                                    <button class="bg-brand-primary text-white text-xs font-bold px-3 py-1.5 rounded-lg">Auto</button>
                                    <div class="flex-1 bg-slate-900 rounded-lg flex items-center px-3 border border-slate-700">
                                        <input type="text" value="0.5" class="bg-transparent w-full text-right text-sm text-slate-300 outline-none">
                                        <span class="text-slate-500 text-xs ml-1">%</span>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-sm text-slate-400">Transaction deadline</span>
                                </div>
                                <div class="flex items-center gap-2 bg-slate-900 rounded-lg p-2 border border-slate-700 w-max">
                                    <input type="number" value="30" class="bg-transparent w-12 text-center text-sm text-slate-300 outline-none">
                                    <span class="text-slate-500 text-xs">minutes</span>
                                </div>
                            </div>

                            <div class="border-t border-slate-700 pt-3">
                                <h4 class="text-xs font-bold text-slate-500 uppercase mb-3">Interface Settings</h4>
                                
                                <div class="flex justify-between items-center mb-3">
                                    <span class="text-sm text-slate-300">Auto Router API</span>
                                    <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                        <input type="checkbox" checked id="toggle1" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-600 left-0" onclick="toggleSwitch('toggle1')"/>
                                        <label for="toggle1" class="toggle-label block overflow-hidden h-5 rounded-full bg-slate-700 cursor-pointer"></label>
                                    </div>
                                </div>

                                <div class="flex justify-between items-center">
                                    <span class="text-sm text-slate-300">Expert Mode</span>
                                    <div class="relative inline-block w-10 mr-2 align-middle select-none">
                                        <input type="checkbox" id="toggle2" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-600 left-0" onclick="toggleSwitch('toggle2')"/>
                                        <label for="toggle2" class="toggle-label block overflow-hidden h-5 rounded-full bg-slate-700 cursor-pointer"></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Input From -->
                <div class="bg-slate-800/40 rounded-2xl p-4 mb-2 hover:bg-slate-800/60 transition cursor-pointer border border-transparent hover:border-slate-600">
                    <div class="flex justify-between mb-2">
                        <span class="text-slate-400 text-sm">Pay with</span>
                        <span class="text-slate-400 text-sm">Balance: <span id="balance-from">0.0</span></span>
                    </div>
                    <div class="flex justify-between items-center">
                        <input type="number" id="input-amount" placeholder="0.0" class="bg-transparent text-3xl font-medium w-full outline-none text-white placeholder-slate-500">
                        <button onclick="openTokenModal('from')" class="flex items-center gap-2 bg-slate-700 hover:bg-slate-600 rounded-full py-1.5 px-3 transition border border-slate-600">
                            <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" class="w-6 h-6" id="icon-from">
                            <span class="font-bold text-white" id="label-from">ETH</span>
                            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                    </div>
                </div>

                <!-- Switcher Icon -->
                <div class="flex justify-center -my-3 relative z-10">
                    <div class="bg-slate-800 border-4 border-slate-900 rounded-xl p-2 cursor-pointer hover:rotate-180 transition duration-300 hover:text-brand-primary text-slate-400">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                    </div>
                </div>

                <!-- Input To -->
                <div class="bg-slate-800/40 rounded-2xl p-4 mt-2 hover:bg-slate-800/60 transition cursor-pointer border border-transparent hover:border-slate-600">
                    <div class="flex justify-between mb-2">
                        <span class="text-slate-400 text-sm">Receive</span>
                        <span class="text-slate-400 text-sm">Balance: <span id="balance-to">0.0</span></span>
                    </div>
                    <div class="flex justify-between items-center">
                        <input type="number" id="output-amount" placeholder="0.0" readonly class="bg-transparent text-3xl font-medium w-full outline-none text-slate-400">
                        <button onclick="openTokenModal('to')" class="flex items-center gap-2 bg-slate-700 hover:bg-slate-600 rounded-full py-1.5 px-3 transition border border-slate-600">
                            <img src="https://cdn-icons-png.flaticon.com/512/6132/6132976.png" class="w-6 h-6" id="icon-to">
                            <span class="font-bold text-white" id="label-to">QWEN</span>
                            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                    </div>
                </div>

                <!-- Price Info -->
                <div class="mt-4 flex justify-between items-center px-2">
                    <span class="text-slate-400 text-sm">You will receive</span>
                    <span class="text-brand-primary font-bold text-sm" id="price-info">?? QWEN</span>
                </div>

                <!-- Price Per Token -->
                <div class="mt-2 flex justify-between items-center px-2">
                    <span class="text-slate-500 text-xs">Price</span>
                    <span class="text-slate-400 text-xs" id="price-per-token">1 ETH = ?? QWEN</span>
                </div>

                <!-- Action Button -->
                <button id="swap-action-btn" onclick="handleSwap()" class="w-full mt-6 bg-brand-primary hover:bg-brand-primaryHover text-white font-bold py-4 rounded-2xl text-lg transition shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:cursor-not-allowed">
                    Enter an amount
                </button>
            </div>
        </div>

        <!-- POOL VIEW (Hidden) -->
        <div id="view-pool" class="hidden w-full max-w-[800px] mt-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-white">Pools</h2>
                <button class="bg-brand-primary hover:bg-indigo-500 text-white font-medium py-2 px-4 rounded-lg transition shadow-lg shadow-indigo-500/20">+ New Position</button>
            </div>
            <div class="glass-panel rounded-3xl p-12 text-center border border-slate-700/50">
                <h3 class="text-xl font-medium text-slate-300">Your active V3 liquidity positions will appear here.</h3>
            </div>
        </div>

    </main>

    <!-- TOKEN SELECT MODAL -->
    <div id="token-modal" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-50 hidden flex items-center justify-center">
        <div class="bg-slate-900 w-full max-w-md rounded-3xl p-6 border border-slate-700 shadow-2xl">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-white">Select a token</h3>
                <button onclick="closeTokenModal()" class="text-slate-400 hover:text-white"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            </div>
            
            <input type="text" placeholder="Search name or paste address" class="w-full bg-slate-800 border border-slate-700 rounded-xl py-3 px-4 mb-4 outline-none focus:border-brand-primary text-white placeholder-slate-500">
            
            <div class="flex gap-2 mb-4 overflow-x-auto pb-2">
                <button onclick="selectToken('ETH')" class="flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-3 py-1.5 rounded-full text-sm border border-slate-700 whitespace-nowrap text-slate-300">
                    <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" class="w-5 h-5"> ETH
                </button>
                <button onclick="selectToken('QWEN')" class="flex items-center gap-2 bg-slate-800 hover:bg-slate-700 px-3 py-1.5 rounded-full text-sm border border-slate-700 whitespace-nowrap text-slate-300">
                    <img src="https://cdn-icons-png.flaticon.com/512/6132/6132976.png" class="w-5 h-5"> QWEN
                </button>
            </div>

            <div class="space-y-1">
                <div onclick="selectToken('ETH')" class="flex justify-between items-center p-3 hover:bg-slate-800 rounded-xl cursor-pointer">
                    <div class="flex items-center gap-3">
                        <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" class="w-8 h-8">
                        <div>
                            <div class="font-bold text-white">Ether</div>
                            <div class="text-xs text-slate-500">ETH</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-medium text-slate-300" id="modal-bal-ETH">0.0</div>
                    </div>
                </div>
                <div onclick="selectToken('QWEN')" class="flex justify-between items-center p-3 hover:bg-slate-800 rounded-xl cursor-pointer">
                    <div class="flex items-center gap-3">
                        <img src="https://cdn-icons-png.flaticon.com/512/6132/6132976.png" class="w-8 h-8">
                        <div>
                            <div class="font-bold text-white">Qwen</div>
                            <div class="text-xs text-slate-500">QWEN • Sepolia</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-medium text-slate-300" id="modal-bal-QWEN">0.0</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="js/contracts.js"></script>
    <script src="js/web3.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
